# 浏览器的结构

- 用户界面 - 包括地址栏、前进/后退按钮、书签菜单等。
- 用户界面后端 - 用于绘制基本的窗口小部件，比如组合框和窗口。
- 浏览器引擎 - 在用户界面和呈现引擎之间传送指令。
- 渲染引擎（rendering engine） - 渲染内容，主要是html,css,图片等。dsfsdf
- JavaScript 解释器。用于解析和执行 JavaScript 代码。
- 网络 - 用于网络调用，比如 HTTP 请求。
- 数据存储。这是持久层。浏览器需要在硬盘上保存各种数据，例如 Cookie。


# 渲染引擎
渲染引擎分两种，firfox是Gecko，这是 Mozilla 公司“自制”的。而`Safari`和`Chrome`浏览器使用的都是 `WebKit`

## 主流程
开始会从网络层获取请求文档的内容，内容的大小一般限制在 8000 个块以内。

然后进行如下所示的基本流程：

![](http://p8cyzbt5x.bkt.clouddn.com/UC20180619_195129.png)

渲染引擎解析 HTML 文档，将各个dom标签逐个转化成“content tree”上的 DOM 节点。同时也会解析内部和外部的css, 解析为`css tree`, `css tree`和`dom tree`结合在一起生成了`render tree`

`render tree`是由一系列在按照顺序排列起来的方块组成的，每一个方块都包含类似于颜色、尺寸的信息。

在`render tree`构建好之后，渲染引擎就会经历一个`layout`的阶段: 计算出每一个节点应该出现在屏幕上的确切坐标。

之后的阶段被称为`paiting`阶段，渲染引擎会遍历`render tree`, 然后由用户界面后端层将每一个节点绘制出来。

渲染引擎会尽快把内容呈现在屏幕上，因此不会等待整个文档加载之后才开始构建，而是一边加载一部分，渲染引擎一边渲染一部分。

![webkit 渲染引擎的主流程](http://p8cyzbt5x.bkt.clouddn.com/UC20180619_200256.png)


### 解析
解析是渲染引擎中非常重要的一个环节。感觉还是atom的输入输入比较愧

的萨芬



感觉还是atom看大家放大交罚款了陆利州DJ发来看大家法就是=干

